define(["react","@grafana/ui","@grafana/data"],(function(t,e,r){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r(r.s=12)}([function(e,r){e.exports=t},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2);e.MatomoContext=n.default;var o=r(5);e.MatomoProvider=o.default;var a=r(6);e.createInstance=a.default;var i=r(11);e.useMatomo=i.default},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(r(0)).default.createContext({});e.default=o},function(t,r){t.exports=e},function(t,e){t.exports=r},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(r(0)),a=n(r(2));e.default=function(t){var e=t.children,r=t.value,n=a.default;return o.default.createElement(n.Provider,{value:r},e)}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(r(7));e.default=function(t){return new o.default(t)}},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a=n(r(8)),i=o(r(10));e.types=i,"undefined"!=typeof window&&(window.MatomoTracker=a.default),e.default=a.default},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r};Object.defineProperty(e,"__esModule",{value:!0});var a=r(9),i=function(){function t(e){var r=n(n({},a.defaultOptions),e);if(!r.urlBase)throw new Error("Matomo urlBase is required.");t.initialize(r)}return t.initialize=function(t){var e=t.urlBase,r=t.siteId,n=t.trackerUrl,o=t.srcUrl;if("/"!==e[e.length-1]&&(e+="/"),window._paq=window._paq||[],0===window._paq.length){window._paq.push(["setTrackerUrl",n||e+"matomo.php"]),window._paq.push(["setSiteId",r]),window._paq.push(["enableHeartBeatTimer"]),window._paq.push(["enableLinkTracking"]);var a=document,i=a.createElement("script"),u=a.getElementsByTagName("script")[0];i.type="text/javascript",i.async=!0,i.defer=!0,i.src=o||e+"matomo.js",u&&u.parentNode&&u.parentNode.insertBefore(i,u)}},t.prototype.trackEvents=function(){var t=this,e=Array.from(document.querySelectorAll('[data-matomo-event="click"]'));e.length&&e.forEach((function(e){e.addEventListener("click",(function(){var r=e.dataset,n=r.matomoCategory,o=r.matomoAction,a=r.matomoName,i=r.matomoValue;if(!n||!o)throw new Error("Error: data-matomo-category and data-matomo-action are required.");t.trackEvent({category:n,action:o,name:a,value:Number(i)})}))}))},t.prototype.trackEvent=function(t){var e=t.category,r=t.action,i=t.name,u=t.value,c=o(t,["category","action","name","value"]);if(!e||!r)throw new Error("Error: category and action are required.");this.track(n({data:[a.TRACK_TYPES.TRACK_EVENT,e,r,i,u]},c))},t.prototype.trackSiteSearch=function(t){var e=t.keyword,r=t.category,i=t.count,u=o(t,["keyword","category","count"]);if(!e)throw new Error("Error: keyword is required.");this.track(n({data:[a.TRACK_TYPES.TRACK_SEARCH,e,r,i]},u))},t.prototype.trackLink=function(t){var e=t.href,r=t.linkType,n=void 0===r?"link":r;window._paq.push([a.TRACK_TYPES.TRACK_LINK,e,n])},t.prototype.trackPageView=function(t){this.track(n({data:[a.TRACK_TYPES.TRACK_VIEW]},t))},t.prototype.track=function(t){var e=t.data,r=void 0===e?[]:e,n=t.documentTitle,o=void 0===n?window.document.title:n,a=t.href,i=void 0===a?window.location.href:a,u=t.customDimensions,c=void 0!==u&&u;r.length&&(c&&Array.isArray(c)&&c.length&&c.map((function(t){return window._paq.push(["setCustomDimension",t.id,t.value])})),window._paq.push(["setCustomUrl",i]),window._paq.push(["setDocumentTitle",o]),window._paq.push(r))},t}();e.default=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultOptions={urlBase:null,siteId:1},e.TRACK_TYPES={TRACK_EVENT:"trackEvent",TRACK_LINK:"trackLink",TRACK_SEARCH:"trackSiteSearch",TRACK_VIEW:"trackPageView"}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(r(0)),a=n(r(2));e.default=function(){var t=o.default.useContext(a.default);return{trackEvent:function(e){return t.trackEvent&&t.trackEvent(e)},trackPageView:function(e){return t.trackPageView&&t.trackPageView(e)},trackSiteSearch:function(e){return t.trackSiteSearch&&t.trackSiteSearch(e)}}}},function(t,e,r){"use strict";r.r(e);var n=r(4),o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var a=function(){return(a=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};var i=r(0),u=r.n(i),c=r(1),l=function(t){var e=Object(c.useMatomo)().trackPageView;return Object(i.useEffect)((function(){e({})}),[0]),u.a.createElement("div",null)},s=r(3),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onAttrChanged=function(t){return function(r){var n,o=r.target;e.props.onOptionsChange(a(a({},e.props.options),((n={})[t]=o.value,n)))}},e}return function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.prototype.render=function(){var t=this.props.options;return u.a.createElement("div",{className:"section gf-form-group"},u.a.createElement("h5",{className:"section-heading"},"Connection"),u.a.createElement(s.FormField,{type:"text",label:"Matomo URL",labelWidth:8,inputWidth:20,onChange:this.onAttrChanged("urlBase"),value:t.urlBase||""}),u.a.createElement(s.FormField,{type:"text",label:"Site ID",labelWidth:8,inputWidth:20,onChange:this.onAttrChanged("siteId"),value:t.siteId||0}))},e}(i.PureComponent);r.d(e,"plugin",(function(){return d}));var d=new n.PanelPlugin((function(t){var e=t.options,r=Object(c.createInstance)(e);return u.a.createElement(c.MatomoProvider,{value:r},u.a.createElement(l,a({},t)))})).setDefaults({urlBase:"https://yourinstance.matomo.cloud/",siteId:1}).setEditor(f)}])}));
//# sourceMappingURL=module.js.map