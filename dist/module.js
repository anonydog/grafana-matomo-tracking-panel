/*! For license information please see module.js.LICENSE.txt */
define(["react","@grafana/data"],(function(e,t){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=12)}([function(t,r){t.exports=e},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);Object.defineProperty(t,"MatomoContext",{enumerable:!0,get:function(){return n.default}});var o=r(4);Object.defineProperty(t,"MatomoProvider",{enumerable:!0,get:function(){return o.default}});var a=r(5);Object.defineProperty(t,"createInstance",{enumerable:!0,get:function(){return a.default}});var i=r(10);Object.defineProperty(t,"useMatomo",{enumerable:!0,get:function(){return i.default}})},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(0)).default.createContext({});t.default=o},function(e,r){e.exports=t},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(0)),a=n(r(2));t.default=function(e){var t=e.children,r=e.value,n=a.default;return o.default.createElement(n.Provider,{value:r},t)}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(6));t.default=function(e){return new o.default(e)}},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.types=void 0;var u=i(r(7)),c=a(r(9));t.types=c,"undefined"!=typeof window&&(window.MatomoTracker=u.default),t.default=u.default},function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};Object.defineProperty(t,"__esModule",{value:!0});var a=r(8),i=function(){function e(t){var r=n(n({},a.defaultOptions),t);if(!r.urlBase)throw new Error("Matomo urlBase is required.");e.initialize(r)}return e.initialize=function(e){var t=e.urlBase,r=e.siteId,n=e.userId,o=e.trackerUrl,a=e.srcUrl,i=e.heartBeat,u=e.linkTracking,c=void 0===u||u;if("/"!==t[t.length-1]&&(t+="/"),"undefined"!=typeof window&&(window._paq=window._paq||[],0===window._paq.length)){window._paq.push(["setTrackerUrl",o||t+"matomo.php"]),window._paq.push(["setSiteId",r]),n&&window._paq.push(["setUserId",n]),(!i||i&&i.active)&&this.enableHeartBeatTimer(15),this.enableLinkTracking(c);var s=document,d=s.createElement("script"),f=s.getElementsByTagName("script")[0];d.type="text/javascript",d.async=!0,d.defer=!0,d.src=a||t+"matomo.js",f&&f.parentNode&&f.parentNode.insertBefore(d,f)}},e.enableHeartBeatTimer=function(e){window._paq.push(["enableHeartBeatTimer",e])},e.enableLinkTracking=function(e){window._paq.push(["enableLinkTracking",e])},e.prototype.trackEventsForElements=function(e){var t=this;e.length&&e.forEach((function(e){e.addEventListener("click",(function(){var r=e.dataset,n=r.matomoCategory,o=r.matomoAction,a=r.matomoName,i=r.matomoValue;if(!n||!o)throw new Error("Error: data-matomo-category and data-matomo-action are required.");t.trackEvent({category:n,action:o,name:a,value:Number(i)})}))}))},e.prototype.trackEvents=function(){var e=this,t='[data-matomo-event="click"]',r=!1;if(this.mutationObserver||(r=!0,this.mutationObserver=new MutationObserver((function(r){for(var n=0,o=r;n<o.length;n++){o[n].addedNodes.forEach((function(r){if(r instanceof HTMLElement){r.matches(t)&&e.trackEventsForElements([r]);var n=Array.from(r.querySelectorAll(t));e.trackEventsForElements(n)}}))}}))),this.mutationObserver.observe(document,{childList:!0,subtree:!0}),r){var n=Array.from(document.querySelectorAll(t));this.trackEventsForElements(n)}},e.prototype.stopObserving=function(){this.mutationObserver&&this.mutationObserver.disconnect()},e.prototype.trackEvent=function(e){var t=e.category,r=e.action,i=e.name,u=e.value,c=o(e,["category","action","name","value"]);if(!t||!r)throw new Error("Error: category and action are required.");this.track(n({data:[a.TRACK_TYPES.TRACK_EVENT,t,r,i,u]},c))},e.prototype.trackSiteSearch=function(e){var t=e.keyword,r=e.category,i=e.count,u=o(e,["keyword","category","count"]);if(!t)throw new Error("Error: keyword is required.");this.track(n({data:[a.TRACK_TYPES.TRACK_SEARCH,t,r,i]},u))},e.prototype.trackLink=function(e){var t=e.href,r=e.linkType,n=void 0===r?"link":r;window._paq.push([a.TRACK_TYPES.TRACK_LINK,t,n])},e.prototype.trackPageView=function(e){this.track(n({data:[a.TRACK_TYPES.TRACK_VIEW]},e))},e.prototype.addEcommerceItem=function(e){var t=e.sku,r=e.productName,n=e.productCategory,o=e.productPrice,a=void 0===o?0:o,i=e.productQuantity,u=void 0===i?1:i;window._paq.push(["addEcommerceItem",t,r,n,a,u])},e.prototype.trackEcommerceOrder=function(e){var t=e.orderId,r=e.orderRevenue,n=e.orderSubTotal,o=e.taxAmount,i=e.shippingAmount,u=e.discountOffered,c=void 0!==u&&u;this.track({data:[a.TRACK_TYPES.TRACK_ECOMMERCE_ORDER,t,r,n,o,i,c]})},e.prototype.trackEcommerceCartUpdate=function(e){window._paq.push([a.TRACK_TYPES.TRACK_ECOMMERCE_CART_UPDATE,e])},e.prototype.setEcommerceView=function(e){var t=e.sku,r=e.productName,n=e.productCategory,o=e.productPrice;window._paq.push(["setEcommerceView",t,r,n,o])},e.prototype.setEcommerceCategoryView=function(e){this.setEcommerceView({productCategory:e,productName:!1,sku:!1})},e.prototype.track=function(e){var t=e.data,r=void 0===t?[]:t,n=e.documentTitle,o=void 0===n?window.document.title:n,a=e.href,i=void 0===a?window.location.href:a,u=e.customDimensions,c=void 0!==u&&u;r.length&&(c&&Array.isArray(c)&&c.length&&c.map((function(e){return window._paq.push(["setCustomDimension",e.id,e.value])})),window._paq.push(["setCustomUrl",i]),window._paq.push(["setDocumentTitle",o]),window._paq.push(r))},e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TRACK_TYPES=t.defaultOptions=void 0,t.defaultOptions={urlBase:null,siteId:1},t.TRACK_TYPES={TRACK_EVENT:"trackEvent",TRACK_LINK:"trackLink",TRACK_SEARCH:"trackSiteSearch",TRACK_VIEW:"trackPageView",TRACK_ECOMMERCE_ORDER:"trackEcommerceOrder",TRACK_ECOMMERCE_CART_UPDATE:"trackEcommerceCartUpdate"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(0)),a=n(r(2)),i=n(r(11));t.default=function(){var e=o.default.useContext(a.default);return{trackEvent:function(t){return e.trackEvent&&e.trackEvent(t)},trackEvents:function(){return e.trackEvents&&e.trackEvents()},trackPageView:function(t){return e.trackPageView&&e.trackPageView(t)},trackSiteSearch:function(t){return e.trackSiteSearch&&e.trackSiteSearch(t)},trackLink:function(t){return e.trackLink&&e.trackLink(t)},enableLinkTracking:function(){return i.default(e)}}}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(0));t.default=function(e){var t=e.trackLink,r=function(e){if(e.target){var r=e.target;if("A"===r.nodeName&&t){var n=r.href;n&&!n.match(new RegExp("^(http://www.|https://www.|http://|https://)+("+window.location.hostname+")"))&&t({href:n})}}};o.default.useEffect((function(){return window.document.addEventListener("click",r),function(){return window.document.removeEventListener("click",r)}}),[])}},function(e,t,r){"use strict";r.r(t);var n=r(3);var o=function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};var a=r(0),i=r.n(a),u=r(1),c=function(e){var t=Object(u.useMatomo)().trackPageView;return Object(a.useEffect)((function(){t({})}),[0]),i.a.createElement("div",null)};r.d(t,"plugin",(function(){return s}));var s=new n.PanelPlugin((function(e){var t=e.options,r=Object(u.createInstance)(t);return i.a.createElement(u.MatomoProvider,{value:r},i.a.createElement(c,o({},e)))})).setPanelOptions((function(e){return e.addTextInput({path:"urlBase",name:"Matomo URL",description:"Base URL for Matomo instance",defaultValue:"https://yourinstance.matomo.cloud/"}).addNumberInput({path:"siteId",name:"Site ID",description:"Site ID identifying the Grafana instance in Matomo",defaultValue:1})}))}])}));
//# sourceMappingURL=module.js.map